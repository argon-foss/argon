import{d as P,r as s,R as ee,f as lt,g as ct,j as n,A as ne,m as V,L as dt}from"./main-mgENhJxE.js";import{X as Se}from"./x-DdqX6hpk.js";import{C as fe}from"./chevron-right-L0shKbuN.js";import{C as Le,R as ut}from"./refresh-cw-7ofqJox1.js";import{F as we}from"./file-ByJNBoYI.js";import{A as mt}from"./arrow-left-BDdzoIxS.js";import{C as ve}from"./check-DY-HJxcX.js";import{F as Me}from"./folder-DopfbNew.js";import{P as pt}from"./package-Uli_nnnt.js";import{C as ht}from"./copy-DwTMPZmj.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],yt=P("Archive",ft);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],ye=P("Code",xt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],bt=P("Download",gt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],vt=P("EllipsisVertical",wt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Nt=P("FilePlus",jt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$t=P("FileText",kt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],St=P("FolderPlus",Ct);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ft=P("Image",Mt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Et=P("Move",Ot);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Pt=P("Music",Tt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],At=P("PackageOpen",Dt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fe=P("Pen",zt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rt=P("Save",It);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],_t=P("Search",Lt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_e=P("Trash2",Vt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Oe=P("Upload",qt);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Ht=P("Video",Bt);function Ut(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function Ee(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,e)}return o}function Te(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Ee(Object(o),!0).forEach(function(e){Ut(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Ee(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function Wt(t,r){if(t==null)return{};var o={},e=Object.keys(t),l,m;for(m=0;m<e.length;m++)l=e[m],!(r.indexOf(l)>=0)&&(o[l]=t[l]);return o}function Jt(t,r){if(t==null)return{};var o=Wt(t,r),e,l;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);for(l=0;l<m.length;l++)e=m[l],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}function Zt(t,r){return Xt(t)||Gt(t,r)||Kt(t,r)||Yt()}function Xt(t){if(Array.isArray(t))return t}function Gt(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var o=[],e=!0,l=!1,m=void 0;try{for(var b=t[Symbol.iterator](),v;!(e=(v=b.next()).done)&&(o.push(v.value),!(r&&o.length===r));e=!0);}catch(k){l=!0,m=k}finally{try{!e&&b.return!=null&&b.return()}finally{if(l)throw m}}return o}}function Kt(t,r){if(t){if(typeof t=="string")return Pe(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Pe(t,r)}}function Pe(t,r){(r==null||r>t.length)&&(r=t.length);for(var o=0,e=new Array(r);o<r;o++)e[o]=t[o];return e}function Yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qt(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function De(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),o.push.apply(o,e)}return o}function Ae(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?De(Object(o),!0).forEach(function(e){Qt(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):De(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function en(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return function(e){return r.reduceRight(function(l,m){return m(l)},e)}}function re(t){return function r(){for(var o=this,e=arguments.length,l=new Array(e),m=0;m<e;m++)l[m]=arguments[m];return l.length>=t.length?t.apply(this,l):function(){for(var b=arguments.length,v=new Array(b),k=0;k<b;k++)v[k]=arguments[k];return r.apply(o,[].concat(l,v))}}}function ue(t){return{}.toString.call(t).includes("Object")}function tn(t){return!Object.keys(t).length}function ie(t){return typeof t=="function"}function nn(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function an(t,r){return ue(r)||G("changeType"),Object.keys(r).some(function(o){return!nn(t,o)})&&G("changeField"),r}function rn(t){ie(t)||G("selectorType")}function on(t){ie(t)||ue(t)||G("handlerType"),ue(t)&&Object.values(t).some(function(r){return!ie(r)})&&G("handlersType")}function sn(t){t||G("initialIsRequired"),ue(t)||G("initialType"),tn(t)&&G("initialContent")}function ln(t,r){throw new Error(t[r]||t.default)}var cn={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},G=re(ln)(cn),ce={changes:an,selector:rn,handler:on,initial:sn};function dn(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ce.initial(t),ce.handler(r);var o={current:t},e=re(pn)(o,r),l=re(mn)(o),m=re(ce.changes)(t),b=re(un)(o);function v(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(E){return E};return ce.selector(x),x(o.current)}function k(x){en(e,l,m,b)(x)}return[v,k]}function un(t,r){return ie(r)?r(t.current):r}function mn(t,r){return t.current=Ae(Ae({},t.current),r),r}function pn(t,r,o){return ie(r)?r(t.current):Object.keys(o).forEach(function(e){var l;return(l=r[e])===null||l===void 0?void 0:l.call(r,t.current[e])}),o}var hn={create:dn},fn={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function yn(t){return function r(){for(var o=this,e=arguments.length,l=new Array(e),m=0;m<e;m++)l[m]=arguments[m];return l.length>=t.length?t.apply(this,l):function(){for(var b=arguments.length,v=new Array(b),k=0;k<b;k++)v[k]=arguments[k];return r.apply(o,[].concat(l,v))}}}function xn(t){return{}.toString.call(t).includes("Object")}function gn(t){return t||ze("configIsRequired"),xn(t)||ze("configType"),t.urls?(bn(),{paths:{vs:t.urls.monacoBase}}):t}function bn(){console.warn(Ve.deprecation)}function wn(t,r){throw new Error(t[r]||t.default)}var Ve={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ze=yn(wn)(Ve),vn={config:gn},jn=function(){for(var r=arguments.length,o=new Array(r),e=0;e<r;e++)o[e]=arguments[e];return function(l){return o.reduceRight(function(m,b){return b(m)},l)}};function qe(t,r){return Object.keys(r).forEach(function(o){r[o]instanceof Object&&t[o]&&Object.assign(r[o],qe(t[o],r[o]))}),Te(Te({},t),r)}var Nn={type:"cancelation",msg:"operation is manually canceled"};function xe(t){var r=!1,o=new Promise(function(e,l){t.then(function(m){return r?l(Nn):e(m)}),t.catch(l)});return o.cancel=function(){return r=!0},o}var kn=hn.create({config:fn,isInitialized:!1,resolve:null,reject:null,monaco:null}),Be=Zt(kn,2),se=Be[0],me=Be[1];function $n(t){var r=vn.config(t),o=r.monaco,e=Jt(r,["monaco"]);me(function(l){return{config:qe(l.config,e),monaco:o}})}function Cn(){var t=se(function(r){var o=r.monaco,e=r.isInitialized,l=r.resolve;return{monaco:o,isInitialized:e,resolve:l}});if(!t.isInitialized){if(me({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),xe(ge);if(window.monaco&&window.monaco.editor)return He(window.monaco),t.resolve(window.monaco),xe(ge);jn(Sn,Fn)(On)}return xe(ge)}function Sn(t){return document.body.appendChild(t)}function Mn(t){var r=document.createElement("script");return t&&(r.src=t),r}function Fn(t){var r=se(function(e){var l=e.config,m=e.reject;return{config:l,reject:m}}),o=Mn("".concat(r.config.paths.vs,"/loader.js"));return o.onload=function(){return t()},o.onerror=r.reject,o}function On(){var t=se(function(o){var e=o.config,l=o.resolve,m=o.reject;return{config:e,resolve:l,reject:m}}),r=window.require;r.config(t.config),r(["vs/editor/editor.main"],function(o){He(o),t.resolve(o)},function(o){t.reject(o)})}function He(t){se().monaco||me({monaco:t})}function En(){return se(function(t){var r=t.monaco;return r})}var ge=new Promise(function(t,r){return me({resolve:t,reject:r})}),Ue={config:$n,init:Cn,__getMonacoInstance:En},Tn={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},be=Tn,Pn={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Dn=Pn;function An({children:t}){return ee.createElement("div",{style:Dn.container},t)}var zn=An,In=zn;function Rn({width:t,height:r,isEditorReady:o,loading:e,_ref:l,className:m,wrapperProps:b}){return ee.createElement("section",{style:{...be.wrapper,width:t,height:r},...b},!o&&ee.createElement(In,null,e),ee.createElement("div",{ref:l,style:{...be.fullWidth,...!o&&be.hide},className:m}))}var Ln=Rn,We=s.memo(Ln);function _n(t){s.useEffect(t,[])}var Je=_n;function Vn(t,r,o=!0){let e=s.useRef(!0);s.useEffect(e.current||!o?()=>{e.current=!1}:t,r)}var q=Vn;function oe(){}function ae(t,r,o,e){return qn(t,e)||Bn(t,r,o,e)}function qn(t,r){return t.editor.getModel(Ze(t,r))}function Bn(t,r,o,e){return t.editor.createModel(r,o,e?Ze(t,e):void 0)}function Ze(t,r){return t.Uri.parse(r)}function Hn({original:t,modified:r,language:o,originalLanguage:e,modifiedLanguage:l,originalModelPath:m,modifiedModelPath:b,keepCurrentOriginalModel:v=!1,keepCurrentModifiedModel:k=!1,theme:x="light",loading:E="Loading...",options:D={},height:L="100%",width:W="100%",className:B,wrapperProps:T={},beforeMount:I=oe,onMount:H=oe}){let[N,p]=s.useState(!1),[h,$]=s.useState(!0),M=s.useRef(null),S=s.useRef(null),Z=s.useRef(null),O=s.useRef(H),g=s.useRef(I),R=s.useRef(!1);Je(()=>{let f=Ue.init();return f.then(j=>(S.current=j)&&$(!1)).catch(j=>(j==null?void 0:j.type)!=="cancelation"&&console.error("Monaco initialization: error:",j)),()=>M.current?J():f.cancel()}),q(()=>{if(M.current&&S.current){let f=M.current.getOriginalEditor(),j=ae(S.current,t||"",e||o||"text",m||"");j!==f.getModel()&&f.setModel(j)}},[m],N),q(()=>{if(M.current&&S.current){let f=M.current.getModifiedEditor(),j=ae(S.current,r||"",l||o||"text",b||"");j!==f.getModel()&&f.setModel(j)}},[b],N),q(()=>{let f=M.current.getModifiedEditor();f.getOption(S.current.editor.EditorOption.readOnly)?f.setValue(r||""):r!==f.getValue()&&(f.executeEdits("",[{range:f.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),f.pushUndoStop())},[r],N),q(()=>{var f,j;(j=(f=M.current)==null?void 0:f.getModel())==null||j.original.setValue(t||"")},[t],N),q(()=>{let{original:f,modified:j}=M.current.getModel();S.current.editor.setModelLanguage(f,e||o||"text"),S.current.editor.setModelLanguage(j,l||o||"text")},[o,e,l],N),q(()=>{var f;(f=S.current)==null||f.editor.setTheme(x)},[x],N),q(()=>{var f;(f=M.current)==null||f.updateOptions(D)},[D],N);let te=s.useCallback(()=>{var z;if(!S.current)return;g.current(S.current);let f=ae(S.current,t||"",e||o||"text",m||""),j=ae(S.current,r||"",l||o||"text",b||"");(z=M.current)==null||z.setModel({original:f,modified:j})},[o,r,l,t,e,m,b]),K=s.useCallback(()=>{var f;!R.current&&Z.current&&(M.current=S.current.editor.createDiffEditor(Z.current,{automaticLayout:!0,...D}),te(),(f=S.current)==null||f.editor.setTheme(x),p(!0),R.current=!0)},[D,x,te]);s.useEffect(()=>{N&&O.current(M.current,S.current)},[N]),s.useEffect(()=>{!h&&!N&&K()},[h,N,K]);function J(){var j,z,X,Y;let f=(j=M.current)==null?void 0:j.getModel();v||((z=f==null?void 0:f.original)==null||z.dispose()),k||((X=f==null?void 0:f.modified)==null||X.dispose()),(Y=M.current)==null||Y.dispose()}return ee.createElement(We,{width:W,height:L,isEditorReady:N,loading:E,_ref:Z,className:B,wrapperProps:T})}var Un=Hn;s.memo(Un);function Wn(t){let r=s.useRef();return s.useEffect(()=>{r.current=t},[t]),r.current}var Jn=Wn,de=new Map;function Zn({defaultValue:t,defaultLanguage:r,defaultPath:o,value:e,language:l,path:m,theme:b="light",line:v,loading:k="Loading...",options:x={},overrideServices:E={},saveViewState:D=!0,keepCurrentModel:L=!1,width:W="100%",height:B="100%",className:T,wrapperProps:I={},beforeMount:H=oe,onMount:N=oe,onChange:p,onValidate:h=oe}){let[$,M]=s.useState(!1),[S,Z]=s.useState(!0),O=s.useRef(null),g=s.useRef(null),R=s.useRef(null),te=s.useRef(N),K=s.useRef(H),J=s.useRef(),f=s.useRef(e),j=Jn(m),z=s.useRef(!1),X=s.useRef(!1);Je(()=>{let u=Ue.init();return u.then(d=>(O.current=d)&&Z(!1)).catch(d=>(d==null?void 0:d.type)!=="cancelation"&&console.error("Monaco initialization: error:",d)),()=>g.current?Q():u.cancel()}),q(()=>{var d,A,w,C;let u=ae(O.current,t||e||"",r||l||"",m||o||"");u!==((d=g.current)==null?void 0:d.getModel())&&(D&&de.set(j,(A=g.current)==null?void 0:A.saveViewState()),(w=g.current)==null||w.setModel(u),D&&((C=g.current)==null||C.restoreViewState(de.get(m))))},[m],$),q(()=>{var u;(u=g.current)==null||u.updateOptions(x)},[x],$),q(()=>{!g.current||e===void 0||(g.current.getOption(O.current.editor.EditorOption.readOnly)?g.current.setValue(e):e!==g.current.getValue()&&(X.current=!0,g.current.executeEdits("",[{range:g.current.getModel().getFullModelRange(),text:e,forceMoveMarkers:!0}]),g.current.pushUndoStop(),X.current=!1))},[e],$),q(()=>{var d,A;let u=(d=g.current)==null?void 0:d.getModel();u&&l&&((A=O.current)==null||A.editor.setModelLanguage(u,l))},[l],$),q(()=>{var u;v!==void 0&&((u=g.current)==null||u.revealLine(v))},[v],$),q(()=>{var u;(u=O.current)==null||u.editor.setTheme(b)},[b],$);let Y=s.useCallback(()=>{var u;if(!(!R.current||!O.current)&&!z.current){K.current(O.current);let d=m||o,A=ae(O.current,e||t||"",r||l||"",d||"");g.current=(u=O.current)==null?void 0:u.editor.create(R.current,{model:A,automaticLayout:!0,...x},E),D&&g.current.restoreViewState(de.get(d)),O.current.editor.setTheme(b),v!==void 0&&g.current.revealLine(v),M(!0),z.current=!0}},[t,r,o,e,l,m,x,E,D,b,v]);s.useEffect(()=>{$&&te.current(g.current,O.current)},[$]),s.useEffect(()=>{!S&&!$&&Y()},[S,$,Y]),f.current=e,s.useEffect(()=>{var u,d;$&&p&&((u=J.current)==null||u.dispose(),J.current=(d=g.current)==null?void 0:d.onDidChangeModelContent(A=>{X.current||p(g.current.getValue(),A)}))},[$,p]),s.useEffect(()=>{if($){let u=O.current.editor.onDidChangeMarkers(d=>{var w;let A=(w=g.current.getModel())==null?void 0:w.uri;if(A&&d.find(C=>C.path===A.path)){let C=O.current.editor.getModelMarkers({resource:A});h==null||h(C)}});return()=>{u==null||u.dispose()}}return()=>{}},[$,h]);function Q(){var u,d;(u=J.current)==null||u.dispose(),L?D&&de.set(m,g.current.saveViewState()):(d=g.current.getModel())==null||d.dispose(),g.current.dispose()}return ee.createElement(We,{width:W,height:B,isEditorReady:$,loading:k,_ref:R,className:T,wrapperProps:I})}var Xn=Zn,Gn=s.memo(Xn),Kn=Gn;const Yn=t=>{if(t===0)return"0 B";const r=1024,o=["B","KB","MB","GB","TB"],e=Math.floor(Math.log(t)/Math.log(r));return`${parseFloat((t/Math.pow(r,e)).toFixed(2))} ${o[e]}`},Qn=t=>new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),Ie={"text/":{icon:$t,canEdit:!0,editor:"monaco",viewable:!0},"application/json":{icon:ye,canEdit:!0,editor:"monaco",viewable:!0},"application/javascript":{icon:ye,canEdit:!0,editor:"monaco",viewable:!0},"application/x-yaml":{icon:ye,canEdit:!0,editor:"monaco",viewable:!0},"image/":{icon:Ft,canEdit:!1,viewable:!1},"audio/":{icon:Pt,canEdit:!1,viewable:!1},"video/":{icon:Ht,canEdit:!1,viewable:!1},"application/zip":{icon:pt,canEdit:!1,viewable:!1},default:{icon:we,canEdit:!1,viewable:!0}},Xe=t=>{const r=Object.entries(Ie).find(([o])=>t.startsWith(o));return r?r[1]:Ie.default},ea=t=>["application/zip","application/x-tar","application/x-gzip","application/x-rar-compressed"].includes(t),Ge=10*1024*1024,ta=({toast:t})=>n.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed bottom-4 right-4 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 
      ${t.type==="success"?"bg-gray-900 text-white":"bg-red-500 text-white"}`,children:[t.type==="success"?n.jsx(ve,{className:"w-4 h-4"}):n.jsx(Le,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:t.message})]}),Re=({checked:t,onChange:r,className:o=""})=>n.jsx("label",{className:`inline-flex items-center cursor-pointer ${o}`,children:n.jsx("div",{className:`w-4 h-4 rounded border transition-colors flex items-center justify-center ${t?"bg-indigo-600 border-indigo-600":"border-gray-300 bg-white"}`,onClick:e=>{e.stopPropagation(),r()},children:t&&n.jsx(ve,{className:"w-3 h-3 text-white"})})}),na=({file:t,position:r,onClose:o,onAction:e})=>{const l=s.useRef(null),[m,b]=s.useState(r),v=Xe(t.mime);s.useEffect(()=>{const L=T=>{l.current&&T.target instanceof Node&&!l.current.contains(T.target)&&o()},W=()=>{if(l.current){const T=l.current.getBoundingClientRect(),I={width:window.innerWidth,height:window.innerHeight};let H=r.x,N=r.y;H+T.width>I.width&&(H=Math.max(0,I.width-T.width-16)),N+T.height>I.height&&(N=Math.max(0,I.height-T.height-16)),b({x:H,y:N})}};document.addEventListener("mousedown",L);const B=setTimeout(W,10);return()=>{document.removeEventListener("mousedown",L),clearTimeout(B)}},[o,r]);const k=v.viewable||t.size<Ge,x=t.readonly===!0,E=t.noDelete===!0,D=[...v.canEdit||k?[{label:"Edit/View",icon:Fe,action:"edit"}]:[],...ea(t.mime)?[{label:"Extract",icon:At,action:"extract"}]:[],{label:"Download",icon:bt,action:"download"},{label:"Copy",icon:ht,action:"copy"},{label:"Rename",icon:Fe,action:"rename",disabled:x||E},{label:"Move",icon:Et,action:"move",disabled:x||E},{label:"Delete",icon:_e,action:"delete",destructive:!0,disabled:E}];return n.jsx(V.div,{ref:l,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1},className:"fixed z-50 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1",style:{top:m.y,left:m.x},children:D.map(({label:L,icon:W,action:B,destructive:T,disabled:I})=>n.jsxs("button",{onClick:()=>{I||e(B)},disabled:I,className:`w-full px-3 py-2 text-left flex items-center space-x-2 text-sm 
              ${I?"opacity-50 cursor-not-allowed":""}
              ${T?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-50"}`,children:[n.jsx(W,{className:"w-4 h-4"}),n.jsx("span",{children:L})]},B))})},pa=()=>{var $e,Ce;const{id:t}=lt(),r=ct(),o=localStorage.getItem("token"),[e,l]=s.useState(null),[m,b]=s.useState([]),[v,k]=s.useState([]),[x,E]=s.useState(new Set),[D,L]=s.useState(!0),[W,B]=s.useState(null),[T,I]=s.useState(null),[H,N]=s.useState({}),[p,h]=s.useState(null),[$,M]=s.useState(null),[S,Z]=s.useState([]),[O,g]=s.useState([]),[R,te]=s.useState(""),[K,J]=s.useState({}),[f,j]=s.useState(!1),[z,X]=s.useState(!1),Y=s.useRef(null),Q=s.useRef(0),u=s.useMemo(()=>m.join("/"),[m]),d=s.useCallback((a,i="success")=>{const c=Math.random().toString(36);Z(y=>[...y,{id:c,message:a,type:i}]),setTimeout(()=>{Z(y=>y.filter(F=>F.id!==c))},3e3)},[]),A=s.useCallback(async()=>{try{const a=await fetch(`/api/servers/${t}?include[node]=true`,{headers:{Authorization:`Bearer ${o}`}});if(!a.ok)throw new Error("Failed to fetch server details");const i=await a.json();l(i)}catch{B("Failed to fetch server details"),d("Failed to fetch server details","error")}},[t,o,d]),w=s.useCallback(async()=>{if(e)try{L(!0);const a=await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/list/${u}?showHidden=${z}`,{headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}});if(!a.ok)throw new Error("Failed to fetch directory contents");const i=await a.json();k(i.contents),B(null)}catch{B("Failed to fetch files"),d("Failed to fetch files","error")}finally{L(!1)}},[e,u,z,d]),C=s.useCallback(async()=>{if(e)try{const a=await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/disk-usage`,{headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}});if(!a.ok)throw new Error("Failed to fetch disk usage");const i=await a.json();I(i)}catch(a){console.error("Failed to fetch disk usage:",a)}},[e]),je=s.useCallback(async a=>{if(!e)return"";try{const i=await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/contents/${u}/${a.name}`,{headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}});if(!i.ok)throw new Error("Failed to fetch file contents");return await i.text()}catch{return d("Failed to load file contents","error"),""}},[e,u,d]),Ne=s.useCallback(async a=>{if(!(!e||!a))try{L(!0);const i=await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/search?query=${encodeURIComponent(a)}&path=${encodeURIComponent(u)}&showHidden=${z}`,{headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}});if(!i.ok)throw new Error("Failed to search files");const c=await i.json();k(c.results)}catch{d("Failed to search files","error")}finally{L(!1)}},[e,u,z,d]),ke=s.useCallback(async(a,i)=>{if(e)try{switch(J(c=>({...c,[i.name]:{loading:!0,type:a}})),a){case"edit":{const c=await je(i);h({type:"file-editor",data:{file:i,content:c}});break}case"extract":{if(N(y=>({...y,extract:!0})),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/extract/${u}`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/json"},body:JSON.stringify({file:i.name})})).ok)throw new Error("Failed to extract archive");d(`Extracted ${i.name}`),await w(),N(y=>({...y,extract:!1}));break}case"delete":{if(i.noDelete){d(`Cannot delete protected file: ${i.name}`,"error");break}if(N(y=>({...y,delete:!0})),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/delete/${u}/${i.name}`,{method:"DELETE",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}})).ok)throw new Error("Failed to delete file");d(`Deleted ${i.name}`),await w(),await C(),N(y=>({...y,delete:!1}));break}case"download":{window.open(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/download/${u}/${i.name}?token=${e==null?void 0:e.validationToken}`,"_blank");break}case"rename":{if(i.readonly||i.noDelete){d(`Cannot rename protected file: ${i.name}`,"error");break}h({type:"rename",data:{file:i}});break}case"move":{if(i.readonly||i.noDelete){d(`Cannot move protected file: ${i.name}`,"error");break}h({type:"move",data:{file:i}});break}case"copy":{h({type:"move",data:{file:i,isCopy:!0}});break}}}catch{d(`Failed to ${a} ${i.name}`,"error")}finally{J(c=>({...c,[i.name]:{loading:!1,type:a}})),M(null)}},[e,u,je,w,C,d]),Ke=s.useCallback(async a=>{if(e)try{if(h(c=>c?{...c,loading:!0}:null),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/write/${u}/${a}`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/octet-stream"},body:""})).ok)throw new Error("Failed to create file");d(`Created file ${a}`),h(null),await w(),await C()}catch{d("Failed to create file","error"),h(c=>c?{...c,loading:!1}:null)}},[e,u,w,C,d]),Ye=s.useCallback(async a=>{if(e)try{if(h(c=>c?{...c,loading:!0}:null),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/create-directory/${u}/${a}`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}})).ok)throw new Error("Failed to create folder");d(`Created folder ${a}`),h(null),await w()}catch{d("Failed to create folder","error"),h(c=>c?{...c,loading:!1}:null)}},[e,u,w,d]),Qe=s.useCallback(async(a,i)=>{if(e)try{h(_=>_?{..._,loading:!0}:null);const c=`${u}/${a.name}`,y=`${u}/${i}`;if(!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/rename`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/json"},body:JSON.stringify({from:c,to:y})})).ok)throw new Error("Failed to rename file");d(`Renamed ${a.name} to ${i}`),h(null),await w()}catch{d("Failed to rename file","error"),h(y=>y?{...y,loading:!1}:null)}},[e,u,w,d]),et=s.useCallback(async(a,i,c=!1)=>{if(e)try{h(_=>_?{..._,loading:!0}:null);const y=`${u}/${a.name}`,F=`${i}/${a.name}`;if(c){if(!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/copy`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/json"},body:JSON.stringify({from:y,to:F})})).ok)throw new Error("Failed to copy file");d(`Copied ${a.name} to ${i}`)}else{if(!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/rename`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/json"},body:JSON.stringify({from:y,to:F})})).ok)throw new Error("Failed to move file");d(`Moved ${a.name} to ${i}`)}h(null),await w(),await C()}catch{d(`Failed to ${c?"copy":"move"} file`,"error"),h(F=>F?{...F,loading:!1}:null)}},[e,u,w,C,d]),tt=s.useCallback(async(a,i)=>{if(e)try{h(F=>F?{...F,loading:!0}:null);const c=`${u}/${a.name}`;if(!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/chmod`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/json"},body:JSON.stringify({path:c,mode:i})})).ok)throw new Error("Failed to change permissions");d(`Changed permissions for ${a.name}`),h(null),await w()}catch{d("Failed to change permissions","error"),h(y=>y?{...y,loading:!1}:null)}},[e,u,w,d]),nt=s.useCallback(async()=>{if(!e||x.size===0||!confirm(`Are you sure you want to delete ${x.size} items?`))return;N(i=>({...i,massDelete:!0}));let a=!0;for(const i of x)try{(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/delete/${u}/${i}`,{method:"DELETE",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`}})).ok||(a=!1,d(`Failed to delete ${i}`,"error"))}catch{a=!1,d(`Failed to delete ${i}`,"error")}a&&d(`Deleted ${x.size} items`),E(new Set),await w(),await C(),N(i=>({...i,massDelete:!1}))},[e,u,x,w,C,d]),pe=s.useCallback(async a=>{if(!e)return;const i=Array.from(a).map(c=>({file:c,progress:0,status:"pending"}));g(c=>[...c,...i]);for(const c of i){const y=new FormData;y.append("files",c.file);try{if(g(_=>_.map(U=>U.file===c.file?{...U,status:"uploading",progress:10}:U)),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/upload/${u}`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`},body:y})).ok)throw new Error("Upload failed");g(_=>_.map(U=>U.file===c.file?{...U,status:"complete",progress:100}:U)),d(`Uploaded ${c.file.name}`)}catch{g(_=>_.map(U=>U.file===c.file?{...U,status:"error",error:"Upload failed"}:U)),d(`Failed to upload ${c.file.name}`,"error")}}await w(),await C(),setTimeout(()=>{g(c=>c.filter(y=>y.status==="pending"||y.status==="uploading"))},3e3)},[e,u,w,C,d]),at=s.useCallback(async a=>{if(!(!e||x.size===0))try{if(h(c=>c?{...c,loading:!0}:null),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/compress`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/json"},body:JSON.stringify({files:Array.from(x).map(c=>`${u}/${c}`),destination:`${u}/${a}.zip`})})).ok)throw new Error("Failed to create archive");d("Archive created successfully"),h(null),E(new Set),await w(),await C()}catch{d("Failed to create archive","error"),h(c=>c?{...c,loading:!1}:null)}},[e,u,x,w,C,d]),rt=s.useCallback(async(a,i)=>{if(!e)return!1;try{if(J(y=>({...y,[a.name]:{loading:!0,type:"save"}})),!(await fetch(`http://${e.node.fqdn}:${e.node.port}/api/v1/filesystem/${e.internalId}/write/${u}/${a.name}`,{method:"POST",headers:{Authorization:`Bearer ${e==null?void 0:e.validationToken}`,"Content-Type":"application/octet-stream"},body:i})).ok)throw new Error("Failed to save file");return d("File saved successfully"),!0}catch{return d("Failed to save file","error"),!1}finally{J(c=>({...c,[a.name]:{loading:!1,type:"save"}}))}},[e,u,d]),he=s.useCallback(a=>{a.preventDefault(),a.stopPropagation(),a.type==="dragenter"?Q.current+=1:a.type==="dragleave"&&(Q.current-=1),a.type==="dragenter"&&Q.current===1?j(!0):a.type==="dragleave"&&Q.current===0&&j(!1)},[]),ot=s.useCallback(a=>{a.preventDefault(),a.stopPropagation(),Q.current=0,j(!1);const{files:i}=a.dataTransfer;i!=null&&i.length&&pe(i)},[pe]),it=s.useCallback(()=>{x.size===v.length?E(new Set):E(new Set(v.map(a=>a.name)))},[v,x.size]),st=s.useCallback(a=>{E(i=>{const c=new Set(i);return c.has(a)?c.delete(a):c.add(a),c})},[]);s.useEffect(()=>{A()},[A]),s.useEffect(()=>{e&&(w(),C())},[e,w,C]),s.useEffect(()=>{if(R.trim().length>2){const a=setTimeout(()=>{Ne(R)},500);return()=>clearTimeout(a)}else e&&R.trim().length===0&&w()},[R,e,Ne,w]);const le=s.useMemo(()=>[...v].sort((a,i)=>a.isFile!==i.isFile?a.isFile?1:-1:a.name.localeCompare(i.name)),[v]);return n.jsxs("div",{className:"min-h-screen px-8 py-8 bg-gray-50",onDragEnter:he,onDragLeave:he,onDragOver:he,onDrop:ot,children:[n.jsx(ne,{children:S.map(a=>n.jsx(ta,{toast:a},a.id))}),n.jsx(ne,{children:f&&n.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50",children:n.jsxs(V.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl p-8 text-center",children:[n.jsx(Oe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Drop files to upload"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Files will be uploaded to current directory"})]})})}),n.jsx(ne,{children:x.size>0&&n.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40 bg-white rounded-lg shadow-lg border border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[x.size," ",x.size===1?"item":"items"," selected"]}),n.jsxs("button",{onClick:()=>h({type:"compress"}),disabled:H.compress,className:"flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(yt,{className:"w-4 h-4 mr-1.5"}),H.compress?"Creating...":"Create Archive"]}),n.jsxs("button",{onClick:nt,disabled:H.massDelete,className:"flex items-center px-3 py-1.5 text-xs font-medium text-red-600 bg-white border border-red-200 rounded-md hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(_e,{className:"w-4 h-4 mr-1.5"}),H.massDelete?"Deleting...":"Delete"]}),n.jsxs("button",{onClick:()=>E(new Set),className:"flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[n.jsx(Se,{className:"w-4 h-4 mr-1.5"}),"Clear Selection"]})]})})}),n.jsxs("div",{className:"max-w-[1500px] mx-auto space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx("button",{onClick:()=>r("/servers"),className:"hover:text-gray-900 transition-colors duration-100",children:"Servers"}),n.jsx(fe,{className:"w-4 h-4 mx-1"}),n.jsx("button",{onClick:()=>r(`/servers/${t}`),className:"hover:text-gray-900 transition-colors duration-100",children:e==null?void 0:e.name}),n.jsx(fe,{className:"w-4 h-4 mx-1"}),n.jsx("span",{className:"text-gray-900 font-medium",children:"Files"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"File Manager"}),W&&n.jsxs(V.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center px-3 py-1.5 text-xs text-red-700 bg-red-50 border border-red-100 rounded-md",children:[n.jsx(Le,{className:"w-3.5 h-3.5 mr-1.5"}),W]})]})]}),T&&n.jsxs("div",{className:"flex items-center justify-end space-x-6 text-sm",children:[n.jsxs("div",{className:"flex items-center text-gray-500",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1.5"}),n.jsxs("span",{children:[T.human," used"]})]}),n.jsxs("div",{className:"flex items-center text-gray-500",children:[n.jsx(we,{className:"w-4 h-4 mr-1.5"}),n.jsxs("span",{children:[T.files.toLocaleString()," files"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>b(a=>a.slice(0,-1)),disabled:m.length===0,className:`p-2 text-gray-500 transition-colors duration-100
                ${m.length===0?"opacity-50 cursor-not-allowed":"hover:text-gray-900"}`,children:n.jsx(mt,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>b([]),className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"home"}),m.map((a,i)=>n.jsxs(ee.Fragment,{children:[n.jsx(fe,{className:"w-4 h-4 text-gray-400"}),n.jsx("button",{onClick:()=>b(c=>c.slice(0,i+1)),className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:a})]},i))]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:R,onChange:a=>te(a.target.value),placeholder:"Search...",className:"w-40 px-3 py-1 pl-9 text-sm border border-gray-200 bg-white rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-200"}),n.jsx(_t,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]}),n.jsx("button",{onClick:()=>X(a=>!a),className:`flex items-center px-3 py-1.5 text-xs font-medium rounded-md ${z?"text-blue-700 bg-blue-50 border border-blue-200":"text-gray-700 bg-white border border-gray-200 hover:bg-gray-50"}`,children:z?"Hide Hidden Files":"Show Hidden Files"}),n.jsxs("button",{onClick:()=>h({type:"new-file"}),className:"flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[n.jsx(Nt,{className:"w-4 h-4 mr-1.5"}),"New File"]}),n.jsxs("button",{onClick:()=>h({type:"new-folder"}),className:"flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[n.jsx(St,{className:"w-4 h-4 mr-1.5"}),"New Folder"]}),n.jsxs("label",{className:"flex items-center px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer",children:[n.jsx(Oe,{className:"w-4 h-4 mr-1.5"}),"Upload",n.jsx("input",{ref:Y,type:"file",multiple:!0,onChange:a=>{var i;(i=a.target.files)!=null&&i.length&&(pe(a.target.files),a.target.value="")},className:"hidden"})]}),n.jsx("button",{onClick:()=>{w(),C()},disabled:D,className:"p-2 text-gray-500 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(ut,{className:`w-4 h-4 ${D?"animate-spin":""}`})})]})]}),n.jsx(ne,{children:O.length>0&&n.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-2",children:O.map((a,i)=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 px-4 py-2 rounded-md",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(we,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-700",children:a.file.name})]}),n.jsx("div",{className:"flex items-center space-x-2",children:a.error?n.jsx("span",{className:"text-xs text-red-600",children:a.error}):a.status==="complete"?n.jsx(V.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},children:n.jsx(ve,{className:"w-4 h-4 text-green-500"})}):n.jsx("div",{className:"w-32 h-1 bg-gray-200 rounded-full overflow-hidden",children:n.jsx(V.div,{className:"h-full bg-gray-900",initial:{width:0},animate:{width:`${a.progress}%`},transition:{duration:.1}})})})]},i))})}),D?n.jsx("div",{className:"flex items-center justify-center h-[400px]",children:n.jsx(dt,{})}):n.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},className:"border border-gray-200/50 rounded-xl overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50/50",children:[n.jsx("th",{className:"w-12 px-4 py-3 text-left",children:n.jsx(Re,{checked:x.size===le.length&&le.length>0,onChange:it})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modified"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),n.jsx("th",{className:"w-12"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200/50",children:[le.map(a=>{const i=Xe(a.mime),c=a.isFile?i.icon:Me,y=i.canEdit||!i.canEdit&&a.size<Ge;return n.jsxs(V.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`${y||!a.isFile?"cursor-pointer":""} 
                      hover:bg-gray-50 transition-colors duration-100 ${a.hidden?"bg-gray-50/70":""}`,onClick:()=>{y&&a.isFile?ke("edit",a):a.isFile||b([...m,a.name])},children:[n.jsx("td",{className:"px-4 py-3",onClick:F=>F.stopPropagation(),children:n.jsx(Re,{checked:x.has(a.name),onChange:()=>st(a.name)})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(c,{className:`w-4 h-4 ${a.isFile?a.mime.startsWith("image/")?"text-amber-600":a.mime.startsWith("text/")||a.mime.includes("javascript")||a.mime.includes("json")?"text-blue-600":a.mime.includes("pdf")?"text-red-600":a.mime.startsWith("audio/")?"text-yellow-600":a.mime.startsWith("video/")?"text-pink-600":a.mime.includes("zip")||a.mime.includes("tar")||a.mime.includes("compress")?"text-orange-600":"text-gray-600":"text-[#8146ab]"}`}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{className:"text-sm text-gray-900",children:[a.name,a.hidden&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(hidden)"})]}),(a.readonly||a.noDelete)&&n.jsxs("span",{className:"text-xs text-gray-500",children:[a.readonly&&"Read-only",a.readonly&&a.noDelete&&" â€¢ ",a.noDelete&&"Protected"]})]})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Yn(a.size)}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Qn(a.modifiedAt)}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.mode}),n.jsx("td",{className:"px-4 py-3 text-right",children:n.jsx("button",{onClick:F=>{F.stopPropagation(),M({file:a,position:{x:F.clientX,y:F.clientY}})},className:"p-1 text-gray-400 hover:text-gray-600",children:n.jsx(vt,{className:"w-4 h-4"})})})]},a.name)}),le.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",children:n.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[n.jsx(Me,{className:"w-8 h-8 mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:R?n.jsxs(n.Fragment,{children:['No files matching "',n.jsx("span",{className:"font-medium",children:R}),'"']}):"This folder is empty"})]})})})]})]})}),n.jsx(ne,{children:p&&n.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50",children:n.jsxs(V.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.1},className:`bg-white rounded-xl shadow-xl ${p.type==="file-editor"?"w-[900px] h-[600px]":"w-[400px]"}`,children:[p.type==="file-editor"&&n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p.data.file.name}),p.data.file.readonly&&n.jsx("span",{className:"text-xs text-red-600",children:"Read-only file"})]}),n.jsx("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-gray-600",children:n.jsx(Se,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(Kn,{value:p.data.content,language:p.data.file.mime.split("/")[1]||"plaintext",theme:"vs",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",padding:{top:20},readOnly:p.data.file.readonly===!0},onChange:a=>{h(i=>i?{...i,data:{...i.data,content:a}}:null)}})}),n.jsxs("div",{className:"flex justify-end space-x-2 p-4 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Close"}),!p.data.file.readonly&&n.jsx("button",{onClick:async()=>{await rt(p.data.file,p.data.content)&&h(null)},disabled:($e=K[p.data.file.name])==null?void 0:$e.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 rounded-md 
                                  hover:bg-gray-800 transition-colors duration-100 flex items-center 
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:(Ce=K[p.data.file.name])!=null&&Ce.loading?"Saving...":"Save"})]})]}),p.type==="new-file"&&n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New File"}),n.jsxs("form",{onSubmit:async a=>{a.preventDefault();const i=new FormData(a.currentTarget);await Ke(i.get("name"))},children:[n.jsx("input",{type:"text",name:"name",placeholder:"File name",autoFocus:!0,className:`w-full px-3 py-2 text-sm border border-gray-200 
                                rounded-md bg-white text-gray-900
                                focus:outline-none focus:ring-2 focus:ring-gray-200
                                placeholder:text-gray-500`}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>h(null),className:`px-4 py-2 text-sm font-medium text-gray-700 
                                  hover:text-gray-900 transition-colors duration-100`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 
                                  rounded-md hover:bg-gray-800 
                                  transition-colors duration-100
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:p.loading?"Creating...":"Create"})]})]})]}),p.type==="new-folder"&&n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Folder"}),n.jsxs("form",{onSubmit:async a=>{a.preventDefault();const i=new FormData(a.currentTarget);await Ye(i.get("name"))},children:[n.jsx("input",{type:"text",name:"name",placeholder:"Folder name",autoFocus:!0,className:`w-full px-3 py-2 text-sm border border-gray-200 
                                rounded-md bg-white text-gray-900
                                focus:outline-none focus:ring-2 focus:ring-gray-200
                                placeholder:text-gray-500`}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>h(null),className:`px-4 py-2 text-sm font-medium text-gray-700 
                                  hover:text-gray-900 transition-colors duration-100`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 
                                  rounded-md hover:bg-gray-800 
                                  transition-colors duration-100
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:p.loading?"Creating...":"Create"})]})]})]}),p.type==="rename"&&n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rename File"}),n.jsxs("form",{onSubmit:async a=>{a.preventDefault();const i=new FormData(a.currentTarget);await Qe(p.data.file,i.get("name"))},children:[n.jsx("input",{type:"text",name:"name",defaultValue:p.data.file.name,autoFocus:!0,className:`w-full px-3 py-2 text-sm border border-gray-200 
                                rounded-md bg-white text-gray-900
                                focus:outline-none focus:ring-2 focus:ring-gray-200
                                placeholder:text-gray-500`}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>h(null),className:`px-4 py-2 text-sm font-medium text-gray-700 
                                  hover:text-gray-900 transition-colors duration-100`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 
                                  rounded-md hover:bg-gray-800 
                                  transition-colors duration-100
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:p.loading?"Renaming...":"Rename"})]})]})]}),p.type==="move"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[p.data.isCopy?"Copy":"Move"," ",p.data.file.name]}),n.jsxs("form",{onSubmit:async a=>{a.preventDefault();const i=new FormData(a.currentTarget);await et(p.data.file,i.get("path"),p.data.isCopy)},children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Path"}),n.jsx("input",{type:"text",name:"path",defaultValue:m.length>0?m.join("/"):"/",autoFocus:!0,className:`w-full px-3 py-2 text-sm border border-gray-200 
                                rounded-md bg-white text-gray-900
                                focus:outline-none focus:ring-2 focus:ring-gray-200
                                placeholder:text-gray-500`}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>h(null),className:`px-4 py-2 text-sm font-medium text-gray-700 
                                  hover:text-gray-900 transition-colors duration-100`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 
                                  rounded-md hover:bg-gray-800 
                                  transition-colors duration-100
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:p.loading?p.data.isCopy?"Copying...":"Moving...":p.data.isCopy?"Copy":"Move"})]})]})]}),p.type==="chmod"&&n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Permissions"}),n.jsxs("form",{onSubmit:async a=>{a.preventDefault();const i=new FormData(a.currentTarget);await tt(p.data.file,i.get("mode"))},children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permission Mode (Octal)"}),n.jsx("input",{type:"text",name:"mode",defaultValue:p.data.file.mode,autoFocus:!0,className:`w-full px-3 py-2 text-sm border border-gray-200 
                                rounded-md bg-white text-gray-900
                                focus:outline-none focus:ring-2 focus:ring-gray-200
                                placeholder:text-gray-500`}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Examples: 644 (rw-r--r--), 755 (rwxr-xr-x), 777 (rwxrwxrwx)"}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>h(null),className:`px-4 py-2 text-sm font-medium text-gray-700 
                                  hover:text-gray-900 transition-colors duration-100`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 
                                  rounded-md hover:bg-gray-800 
                                  transition-colors duration-100
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:p.loading?"Updating...":"Save"})]})]})]}),p.type==="compress"&&n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Archive"}),n.jsxs("form",{onSubmit:async a=>{a.preventDefault();const i=new FormData(a.currentTarget);await at(i.get("name"))},children:[n.jsx("input",{type:"text",name:"name",placeholder:"Archive name (without .zip)",autoFocus:!0,className:`w-full px-3 py-2 text-sm border border-gray-200 
                                rounded-md bg-white text-gray-900
                                focus:outline-none focus:ring-2 focus:ring-gray-200
                                placeholder:text-gray-500`}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected items: ",Array.from(x).join(", ")]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>h(null),className:`px-4 py-2 text-sm font-medium text-gray-700 
                                  hover:text-gray-900 transition-colors duration-100`,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p.loading,className:`px-4 py-2 text-sm font-medium text-white bg-gray-900 
                                  rounded-md hover:bg-gray-800 
                                  transition-colors duration-100
                                  disabled:opacity-50 disabled:cursor-not-allowed`,children:p.loading?"Creating...":"Create Archive"})]})]})]})]})})}),n.jsx(ne,{children:$&&n.jsx(na,{file:$.file,position:$.position,onClose:()=>M(null),onAction:a=>ke(a,$.file)})})]})]})};export{pa as default};
